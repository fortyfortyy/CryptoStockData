"use strict";(self["webpackChunkfrontendaa"]=self["webpackChunkfrontendaa"]||[]).push([[36],{5036:function(e,s,t){t.r(s),t.d(s,{default:function(){return y}});var o=t(821);const a={class:"login-container"},r=(0,o._)("h1",{class:"title"},"Log in",-1),n={key:0,class:"notification-err"},l=(0,o._)("p",null," Couldn't log in. Please try again.",-1),i=[l],c={class:"field"},d=(0,o._)("label",null,"Email",-1),u={class:"control"},m={class:"field"},h=(0,o._)("label",null,"Password",-1),p={class:"control"},f=(0,o._)("div",{class:"field"},[(0,o._)("div",{class:"control"},[(0,o._)("button",{class:"button"},"Log in")])],-1);function g(e,s,t,l,g,w){const k=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",a,[r,(0,o._)("form",{id:"loginPage",class:"login-form",onSubmit:s[2]||(s[2]=(0,o.iM)(((...e)=>w.submitForm&&w.submitForm(...e)),["prevent"]))},[g.errors.length?((0,o.wg)(),(0,o.iD)("div",n,i)):(0,o.kq)("",!0),(0,o._)("div",c,[d,(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{type:"email",placeholder:"example@gmail.com",class:"input","onUpdate:modelValue":s[0]||(s[0]=e=>g.email=e)},null,512),[[o.nr,g.email]])])]),(0,o._)("div",m,[h,(0,o._)("div",p,[(0,o.wy)((0,o._)("input",{type:"password",placeholder:"********",class:"input","onUpdate:modelValue":s[1]||(s[1]=e=>g.password=e)},null,512),[[o.nr,g.password]])])]),f,(0,o._)("div",null,[(0,o.Wm)(k,{to:"/sign-up"},{default:(0,o.w5)((()=>[(0,o.Uk)("click here")])),_:1}),(0,o.Uk)(" to sign up! ")]),(0,o._)("div",null,[(0,o.Uk)(" Or here to "),(0,o.Wm)(k,{to:"/password/reset"},{default:(0,o.w5)((()=>[(0,o.Uk)("reset password")])),_:1})])],32)])}t(7658);var w=t(196),k=t(7202),_={name:"LogIn",data(){return{email:"",password:"",errors:[]}},beforeCreate(){this.checkIfAuthenticated()},mounted(){document.title="Log In | StockApp"},methods:{async submitForm(){""===this.email&&this.errors.push("Email is missing"),w.ZP.defaults.headers.common.Authorization="",localStorage.removeItem("access"),localStorage.removeItem("refresh");const e={email:this.email,password:this.password};await w.ZP.post("/api/account/token/",e).then((e=>{const s=e.data.access,t=e.data.refresh;this.$store.commit("setToken",s,t),w.ZP.defaults.headers.common.Authorization="Bearer "+s,localStorage.setItem("access",s),localStorage.setItem("refresh",t),k.Z.push("/stocks")})).catch((e=>{if(e.response)for(const s in e.response.data)this.errors.push(`${e.response.data[s]}`);else this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(e))}))},checkIfAuthenticated(){this.$store.state.isAuthenticated&&k.Z.push("/stocks")}}},v=t(3744);const b=(0,v.Z)(_,[["render",g]]);var y=b}}]);
//# sourceMappingURL=36.js.map