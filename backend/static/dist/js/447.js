"use strict";(self["webpackChunkfrontendaa"]=self["webpackChunkfrontendaa"]||[]).push([[447],{1447:function(s,t,e){e.r(t),e.d(t,{default:function(){return S}});var o=e(821);const r={class:"password-set-container"},a=(0,o._)("h1",{class:"title"},"Set new password",-1),n={key:0,class:"notification-success"},i=(0,o._)("strong",null,"Click here to log in",-1),l={key:0,class:"notification-err"},d=(0,o._)("p",null," Couldn't set new password.",-1),c=[d],u={class:"field"},p=(0,o._)("label",null,"First Password",-1),h={class:"control"},w={class:"field"},m=(0,o._)("label",null,"Repeat Password",-1),f={class:"control"},g=(0,o._)("div",{class:"field"},[(0,o._)("div",{class:"control"},[(0,o._)("button",{class:"button"},"Submit")])],-1);function k(s,t,e,d,k,_){const v=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",r,[a,k.success.length?((0,o.wg)(),(0,o.iD)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.success,(s=>((0,o.wg)(),(0,o.iD)("p",{key:s},(0,o.zw)(s),1)))),128)),(0,o.Wm)(v,{to:"/login",class:"link-log-in"},{default:(0,o.w5)((()=>[i])),_:1})])):(0,o.kq)("",!0),(0,o._)("form",{id:"passwordSet",class:"password-set-form",onSubmit:t[2]||(t[2]=(0,o.iM)(((...s)=>_.submitForm&&_.submitForm(...s)),["prevent"]))},[k.errors.length?((0,o.wg)(),(0,o.iD)("div",l,c)):(0,o.kq)("",!0),(0,o._)("div",u,[p,(0,o._)("div",h,[(0,o.wy)((0,o._)("input",{type:"password",placeholder:"********",class:"input","onUpdate:modelValue":t[0]||(t[0]=s=>k.password=s)},null,512),[[o.nr,k.password]])])]),(0,o._)("div",w,[m,(0,o._)("div",f,[(0,o.wy)((0,o._)("input",{type:"password",placeholder:"********",class:"input","onUpdate:modelValue":t[1]||(t[1]=s=>k.password2=s)},null,512),[[o.nr,k.password2]])])]),g],32)])}e(7658);var _=e(196),v=e(7202),b={name:"PasswordSet",data(){return{uidb:"",token:"",password:"",password2:"",errors:[],success:[]}},mounted(){this.checkIfAuthenticated(),document.title="Set new password | StockApp"},methods:{async submitForm(){""!==this.password&&""!==this.password2||this.errors.push("Password field is missing"),this.password!==this.password2&&this.errors.push("Passwords are not the same"),(this.password.length<9||this.password2.length<9)&&this.errors.push("Password has to have more than 8 characters");const s={password:this.password,password2:this.password2};this.extractTokensFromUrl(),_.ZP.defaults.headers.common.Authorization="",await _.ZP.put(`/api/account/password/set/${this.uidb}/${this.token}/`,s).then((s=>{200===s.status&&(this.success.push("You have successfully set the new password"),v.Z.push("/login"))})).catch((s=>{if(s.response)for(const t in s.response.data)this.errors.push(`${s.response.data[t]}`);else this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(s))}))},extractTokensFromUrl(){const s=window.location.pathname.split("/");console.log(s),this.uidb=s[3],this.token=s[4]},checkIfAuthenticated(){this.$store.state.isAuthenticated&&v.Z.push("/stocks")}}},y=e(3744);const P=(0,y.Z)(b,[["render",k]]);var S=P}}]);
//# sourceMappingURL=447.js.map